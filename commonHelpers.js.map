{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export function getImages(userRequest) {\n    const BASE_URL = 'https://pixabay.com';\n    const END_POINT = '/api/';\n\n    const params = new URLSearchParams({\n        key: '43216617-d9e2d51a1f64026c97bc97c8e',\n        q: `${userRequest}`,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n    });\n    \n    const url = `${BASE_URL}${END_POINT}?${params}`;\n\n    return fetch(url).then(res => res.json()).catch(error => console.error(\"Error while fetching: \", error));\n    throw error;\n};\n \n","\nexport function imagesRender(array) { \n    return array.map(({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n    }) => {\n        return `<li class = \"gallery-item\">\n\n  <a class = \"gallery-link\" href=\"${largeImageURL}\">\n    <img\n    src = \"${webformatURL}\" \n    alt=\"${tags}\"\n    class=\"gallery-image\"\n    />\n  </a>\n\n  <ul class = \"info-list\">\n\n    <li class=\"info-container\">\n      <h2 class=\"main-info\">Likes </h2>\n      <p class=\"info\">${likes}</p>\n    </li>\n\n    <li class=\"info-container\">\n      <h2 class=\"main-info\"> Views </h2>\n      <p class=\"info\">${views}</p>\n    </li>\n\n    <li class=\"info-container\">\n      <h2 class=\"main-info\">Comments </h2>\n      <p class=\"info\">${comments}</p>\n    </li>\n\n    <li class=\"info-container\">\n      <h2 class=\"main-info\">Downloads </h2>\n      <p class=\"info\">${downloads}</p>\n    </li>\n\n  </ul>\n\n</li>`}\n     \n\n    ).join('')\n}","// Described in documentation\nimport SimpleLightbox from \"simplelightbox\";\n// Additional import\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// Described in documentation\nimport iziToast from \"izitoast\";\n// Additional import\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImages } from \"./js/pixabay-api\";\nimport { imagesRender } from  \"./js/render-functions\"\n\nconst userRequestForm = document.querySelector(\".user_request_form\");\nconst gallery = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\n\nuserRequestForm.addEventListener(\"submit\", onRequestSubmit);\n\nfunction onRequestSubmit(event) {\n  event.preventDefault();\n\n  loader.style.visibility = \"visible\";\n\n  const userRequestStr = event.target.elements.user_query.value.toLowerCase().trim().replaceAll(\" \", \"+\");\n  if (!userRequestStr) {\n    iziToast.error({\n      backgroundColor: \"red\",\n      icon: false,\n      progressBar: false,\n      close: false,\n      position: \"topRight\",\n      message: \"Please, input a valid request!\"\n    });\n    return;\n  }\n  else {\n    getImages(userRequestStr).then(data => {\n      if (!data.hits.length) {\n      iziToast.error({\n      backgroundColor: \"red\",\n      icon: false,\n      progressBar: false,\n      close: false,\n      position: \"topRight\",\n      message: \"There are no images matching Your request!\"\n    });\n      }\n      else {\n      \n        gallery.innerHTML = imagesRender(data.hits);\n\n          const lightbox = new SimpleLightbox(\".gallery-link\", {\n          captionsData: \"alt\"\n        });\n        lightbox.refresh();\n      };\n    })\n      .catch(error => {\n      iziToast.error({\n      backgroundColor: \"red\",\n      icon: false,\n      progressBar: false,\n      close: false,\n      position: \"topRight\",\n      message: \"Something went wrong during your request. Please, try again later!\"\n    });\n    })\n      .finally(() => {\n        loader.style.visibility = \"hidden\";\n      })\n  };\n    event.target.reset();\n};"],"names":["getImages","userRequest","BASE_URL","END_POINT","params","url","res","error","imagesRender","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads","userRequestForm","gallery","loader","onRequestSubmit","event","userRequestStr","data","SimpleLightbox","iziToast"],"mappings":"6vBAAO,SAASA,EAAUC,EAAa,CACnC,MAAMC,EAAW,sBACXC,EAAY,QAEZC,EAAS,IAAI,gBAAgB,CAC/B,IAAK,qCACL,EAAG,GAAGH,CAAW,GACjB,WAAY,QACZ,YAAa,aACb,WAAY,MACpB,CAAK,EAEKI,EAAM,GAAGH,CAAQ,GAAGC,CAAS,IAAIC,CAAM,GAE7C,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAOA,EAAI,KAAI,CAAE,EAAE,MAAMC,GAAS,QAAQ,MAAM,yBAA0BA,CAAK,CAAC,CAE3G,CCfO,SAASC,EAAaC,EAAO,CAChC,OAAOA,EAAM,IAAI,CAAC,CACd,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA;AAAA,oCAEqBL,CAAa;AAAA;AAAA,aAEpCD,CAAY;AAAA,WACdE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBASSC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,wBAKLC,CAAK;AAAA;AAAA;AAAA;AAAA;AAAA,wBAKLC,CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA,wBAKRC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA,MAQjC,EAAM,KAAK,EAAE,CACb,CCpCA,MAAMC,EAAkB,SAAS,cAAc,oBAAoB,EAC7DC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAE/CF,EAAgB,iBAAiB,SAAUG,CAAe,EAE1D,SAASA,EAAgBC,EAAO,CAC9BA,EAAM,eAAc,EAEpBF,EAAO,MAAM,WAAa,UAE1B,MAAMG,EAAiBD,EAAM,OAAO,SAAS,WAAW,MAAM,YAAW,EAAG,KAAM,EAAC,WAAW,IAAK,GAAG,EACtG,GAAKC,EAYHtB,EAAUsB,CAAc,EAAE,KAAKC,GAAQ,CAChCA,EAAK,KAAK,QAYbL,EAAQ,UAAYV,EAAae,EAAK,IAAI,EAEvB,IAAIC,EAAe,gBAAiB,CACrD,aAAc,KACxB,CAAS,EACQ,QAAO,GAhBlBC,EAAS,MAAM,CACf,gBAAiB,MACjB,KAAM,GACN,YAAa,GACb,MAAO,GACP,SAAU,WACV,QAAS,4CACf,CAAK,EAWA,EACE,MAAMlB,GAAS,CAChBkB,EAAS,MAAM,CACf,gBAAiB,MACjB,KAAM,GACN,YAAa,GACb,MAAO,GACP,SAAU,WACV,QAAS,oEACf,CAAK,CACL,CAAK,EACE,QAAQ,IAAM,CACbN,EAAO,MAAM,WAAa,QAClC,CAAO,MA7CgB,CACnBM,EAAS,MAAM,CACb,gBAAiB,MACjB,KAAM,GACN,YAAa,GACb,MAAO,GACP,SAAU,WACV,QAAS,gCACf,CAAK,EACD,MACD,CAqCCJ,EAAM,OAAO,OACjB"}